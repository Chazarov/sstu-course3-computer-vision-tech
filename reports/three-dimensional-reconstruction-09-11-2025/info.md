# Трехмерная реконструкция 
Процесс создания 3-д модели объекта или сцены на основе двухмерных изображений или других данных. Цель - получить цифровое пространственное представление объекта с точным описанием его формы и глубины

## Способы:

1. Стереозрение
2. Методы, дополненные нейронными сетями для определения глубины.
3. Проецирование структурированного света: изучение известного светового узора на объект и измерение девормации для определения рельефа
4. Время пролета: измерение времени прохождения светового сигнала до объекта и обратно для вычисления расстоянияздавать фотореалистичные 3D-модели без необходимости ручного выделения объектов.э


### 1 Стереозрение

Стереозрение в компьютерном зрении - это метод получения информации о глубине сцены и расстояниях до объектов с помошью двух камер, расположенных на некотором расстоянии относительно друг друга. (аналогично глазам человека)

Как работает восприятие пространства у человека: Стереозрение + Предугадывание с знанием перспективы. Человек за долгую жизнь привыкает к размеру повседневных объектов. Поэтому даже без стереозрения он может ориентироваться в пространстве , опираясь подсознательно только на перспективу и знания привычных размеров объектов. Но иногда возможны некоторые "деффекты". Внезапно для себя человек пропустит одну ступеньку, а попасть мячем в ворота вообще не будет простой задачей. Это поймут люди , которые играли в 3 - д платформеры или впервый раз одевали очки. В платформерах вообще очень сложно передать глубину , а из за очков у человека меняется привычные свойства его "стереозрения" и становится сложнее угадывать расстояние между объектами. **(сделать максимально короткую но интересную вводную, чтобы увлеч но сохранить время, вставить картинки из летсплея по Little Nitmaire )**

- Как работает алгоритм:
    - Камера снимает изображение сцены под немного разным углом 
    - Изображения ректифицируются. Эпиполярные линии выставляются паралельно краям изображений.  Более того, изображения выравнивают так, что бы для точки с координатами (x0, y0) соответствующая ей эпиполярная линия задавалась уравнением x = x0, тогда для каждой точки соответствующую ей парную точку нужно искать в той-же строчке на изображении со второй камеры
    - На обоих изображениях объекты проецируются в разные точки - это называется паралаксом или диспарацией.
    Задача алгоритма — сопоставить соответствующие точки (пиксели) на левой и правой картинках **(рассказать про несколько типов алгоритмов, триангуляцию)**
    **(разобрать работу алгоритма , но не углублятся в его работу во время презентации)**
    - Расстояние между положениями соответствующих точек в двух изображениях называется смещением (диспарацией).
    - По величине диспарации с помощью триангуляции вычисляется глубина (расстояние) до каждого объекта: чем меньше диспаратность, тем дальше объект.

    Сложности: 
    1. Определение коррелирующих точек — главная техническая задача, для которой применяются шаблонные и машинные методы.
    2. Отсутствие текстуры, повторяющиеся узоры, тени и отражения затрудняют правильное сопоставление. 



- Техническая часть: 
    - **проективная геометрия и однородные координаты** - Проективна геометрия - основа стереозрения. Основная решаемая проблема - на двухмерном получаемом изображении точки описываются как (x,y) тогда как в трехмерном - (x, y, w).  Основное понятие проективной плоскости. (x, y, w) - та же точка на проективной плоскости, что и (x*a, y*a, w*a). Такое описание проективной плоскости называется однородными координатами. Эпиполярная линия — это проекция луча, идущего от точки на первом изображении через центр проекции второй камеры на плоскость второго изображения.
    - модель камеры -  это математическое описание процесса проецирования трехмерной сцены на двумерное изображение, которое фиксируется камерой. Эта модель описывает, как точки в реальном пространстве переходят в пиксели на изображении с учётом параметров камеры и искажений.
    - эпиполярная геометрия (epiporal geomerty), фундаментальная и существенная матрицы (fundamental matrix, essential matrix)
    -  Эпиполярная линия — это проекция луча, идущего от точки на первом изображении через центр проекции второй камеры на плоскость второго изображения.
    - триангуляция стереопары точек - Триангуляция точек в контексте компьютерного зрения и стереозрения — это процесс определения трехмерных координат точки в пространстве по её двум или более двумерным проекциям на разные изображения. Есть несколько методов триангуляции. Более или менее простые. С учетом искажений и без.
    - 
    - карта глубины(depth map)- Карта глубины (depth map) — это изображение, на котором для каждого пикселя, вместо цвета, храниться его расстояние до камеры. Карта глубины может быть получена с помощью специальной камеры глубины (например, сенсор Kinect является своего рода такой камерой), а так же может быть построена по стереопаре изображений. Идея, лежащая в основе построения карты глубины по стереопаре очень проста. Для каждой точки на одном изображении выполняется поиск парной ей точки на другом изображении. А по паре соответствующих точек можно выполнить триангуляцию и определить координаты их прообраза в трехмерном пространстве. Зная трехмерные координаты прообраза, глубина вычисляется, как расстояние до плоскости камеры.
    -  карта смещений(disparity map) и идея, лежащая в основе ее вычисления

## 2 Нейронные сети для определения глубины 

Визуализация и реконструкция 3D-моделей объектов из одного или нескольких изображений с помощью генеративно-состязательных сетей (GAN), например, GANverse3D, который позволяет создавать реалистичные 3D-модели автомобилей и животных по одной фотографии.

Медицинская томография и микрокомпьютерная томография для восстановления комплексных 3D-структур тканей и материалов с помощью глубоких сетей, которые превосходят по точности классические сверточные сети.

Нейросети, обученные восстанавливать объекты и сцены из 2D-изображений и даже по паттернам мозговой активности, что демонстрирует потенциал нейросетей в сложнейших задачах реконструкции.

В приложениях дополненной и виртуальной реальности нейросети используют для оценки глубины и построения пространственных карт сцены на основе данных с одного или нескольких камер, что расширяет возможности реального времени и точности.

## 3 Проецирование структурированного света: изучение известного светового узора на объект и измерение девормации для определения рельефа

Проецирование структурированного света — это метод 3D-сканирования, при котором на поверхность объекта с помощью проектора или лазера проецируется заранее известный световой узор (часто это сетка, полосы или точки). Этот узор после попадания на объект искажается в зависимости от формы и рельефа поверхности.

1. На поверхность объекта с помощью проектора или лазера проецируется структурированный световой рисунок. Узор может иметь различные формы, такие как сетки, полосы или точки.

2. Световой рисунок отражается от поверхности объекта и деформируется в зависимости от формы поверхности.

3. Камера фиксирует изображения искаженного светового рисунка.

4. Специализированное программное обеспечение использует полученные изображения для восстановления формы и размеров объекта в трехмерном пространстве. Алгоритмы программного обеспечения используют деформацию рисунка для расчета формы поверхности объекта.

5. Точность 3D-модели зависит от разрешения камеры, качества проектора или лазера, а также от способности программного обеспечения обрабатывать полученные изображения.


## 4 Метод времени пролета (Time-of-Flight)

Широко используется в сканерах, лидарах (в том числе лидарах машин). А также встроена в телефоны, для поддержания функции распознавания лица.  В методе времени пролета (Time-of-Flight, TOF) передатчик (transmitter) излучает короткие световые импульсы, которые распространяются в пространстве и отражаются от объектов. Приемник (receiver) фиксирует отраженный сигнал с задержкой, определяемой временем прохождения света до объекта и обратно.

На выходе получается изображение или карта, где каждый пиксель соответствует времени, которое потребовалось световому сигналу, чтобы добраться до объекта и вернуться. Это позволяет вычислить расстояние до каждого пикселя сцены, формируя глубинную карту. Такой подход отличается от обычной фотографии тем, что содержит информацию о глубине в дополнение к яркости.


!! У Apple не одна камера . У них та же самая Аппаратная пара - Transmitter и Receiver Sensor. Расположены горизонтально

## Применение: 
3D-реконструкция применяется в промышленной автоматизации, контроле качества, строительстве, дополненной и виртуальной реальности, а также в медиатехнологиях для создания точных и детализированных виртуальных копий реальных объектов.